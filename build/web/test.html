<!DOCTYPE html>
<html>
	<head>
		<title>Test</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!--link rel="prefetch" href="test.jsp"--> <!-- icon prefetch -->
		<style>
			a {color: maroon}
			b {color: red}
			button a {text-decoration: none; color: black;}
			div.head {font-weight: bold; font-size: 500%; font-family: sans-serif; /*background-color: #FED;  /* #FAEBD7 */
				border: 2px solid #840; text-align: center; background-image: linear-gradient(#FFE, #DCB);}
			div.head b {color: red}
		</style>
		<style id="test">
			h2 {color: red}
		</style>
	</head>
	<body onload="init()">
		<a>no parameter a element</a>
		<div class="head">S<b>o</b>S sms</div>
		<div style="/*border: 1px solid blue*/">
			<!--script id="testjsp" src="test.jsp.html">// empty</script-->
		<h2>Test</h2>  <!-- Mary had a little lamb, and then a slice of beef%0ahttps://maps.google.com/maps?f%3dq%26q%3d(-24.81411,28.14014) -->
		<!-- https%3a%2f%2fmaps%2egoogle%2ecom%2fmaps%3ff%3dq%26q%3d%28%2d24%2e81411%2c28%2e14014%29 -->
		<!-- satellite view:  http://maps.google.com/maps?t=k&q=loc:-24.8117491+28.1277914 
			 encoded: http%3A%2F%2Fmaps.google.com%2Fmaps%3Ft%3Dk%26q%3Dloc%3A-24.8117491%2B28.1277914 -->
		<p>date here</p>
		<form name="aform"><input onfocusin="document.aform.afield.value = new Date();" type="text" name="afield" value="empty"> padding
		<p><a href="hub.html"><b>&mdash;&gt; switch.html</b></a></p>
		<p><a href="sms://0825704803?body=Click%20http%3A%2F%2Ftijaska.co.za%2Fsos%2Fguest.html%20for%20help">SMS help page to guest (0825704803)</a></p>
		<p><a href="sms://0825704803?body=one%26two%26three">send SMS to 0825704803</a></p>
		<p><a href="any" onclick="fixme(this)">send SMS to 0825704803 size</a>
			<input name="size" type="text" value="10" size="4"></p>
		<p><a href="https://wa.me/?text=https%3a%2f%2fmaps%2egoogle%2ecom%2fmaps%3ff%3dq%26q%3d%28%2d24%2e81411%2c28%2e14014%29">WhatsApp no num map +27825704803</a></p>
		<p><a href="https://wa.me/27825704803?text=https%3a%2f%2fmaps%2egoogle%2ecom%2fmaps%3ff%3dq%26q%3d%28%2d24%2e81411%2c28%2e14014%29">WhatsApp map 27825704803</a></p>
		<p><a href="https://wa.me/27829999999text=https%3a%2f%2fmaps%2egoogle%2ecom%2fmaps%3ff%3dq%26q%3d%28%2d24%2e81411%2c28%2e14014%29">WhatsApp map 27829999999</a></p>
		<p><a href="https://wa.me/+27825704803?text=http://maps.google.com/maps?t%3Dk%26q%3Dloc%3A-24.8117491%2B28.1277914">WhatsApp satellite +27825704803</a></p>
		<p><a href="whatsapp://+27825704803?text=http://maps.google.com/maps?t%3Dk%26q%3Dloc%3A-24.8117491%2B28.1277914">WhatsApp satellite +27825704803</a></p>
		<p><button onclick="readContacts()">Read Contacts</button></p>
		<!-- Please%20send%20your%20location%20to%20Super%20Centre.%20%20 -->
		<p>sms: <a href="sms://0825704803?body=Click%20this%20link%3A%20http%3A%2F%2Fmaps.google.com%2Fmaps%3Ff=q%2526q=(-24.81270,28.14054)">sms</a></p>
		<p>tel: <a href="tel:0114471542">tel</a></p>
		<p><button onclick="window.open('tel:0114471542')">Phone home</button></p>
		<p><button><a id="sate" href="mt">satellite</a></button></p>
		<p><a href="http://somecomputer.xyz/install.html">http://somecomputer.xyz/install.html</a>
<!--	https://maps.google.com/maps?t=k&q=loc:-24.81270+28.14054 -->
		<p id="log"></p>
		<p id="codes">codes</p>
		</form>
		</div>
		<p><a href="https://tijaska.co.za/sos/caller.html?centre=Mabalingwe%20Rescue&cell=%2B27825704803">Mabalingwe Rescue</a><br>
			<a href="tel:+27-114471542">tel:+27-114471542</a><br>
			<a href="tel:+27 114471542">tel:+27 114471542</a>
		</p>
		<b>bold</b> <em>em</em> <strong>strong</strong>
		<script>
			function byId(id) {
				return document.getElementById(id);
			}
			function readContacts() {
				var api = (navigator.contacts || navigator.mozContacts);
				if (api && !!api.select) { // new Chrome API
				  api.select(['name', 'tel'], {multiple: true})  // , 'email'
					.then(function (contacts) {
					  consoleLog('Found ' + contacts.length + ' contacts.');
					  if (contacts.length) {
						consoleLog('First contact: ' + contacts[0].name + ' [' + contacts[0].tel + ']');  //  /* + ' (' + contacts[0].email + ')'*/
					  }
					})
					.catch(function (err) {
					  consoleLog('Fetching contacts failed: ' + err.name);
					});

				} else if (api && !!api.find) { // old Firefox OS API
				  var criteria = {
					sortBy: 'familyName',
					sortOrder: 'ascending'
				  };

				  api.find(criteria)
					.then(function (contacts) {
					  consoleLog('Found ' + contacts.length + ' contacts.');
					  if (contacts.length) {
						consoleLog('First contact: ' + contacts[0].givenName[0] + ' ' + contacts[0].familyName[0]);
					  }
					})
					.catch(function (err) {
					  consoleLog('Fetching contacts failed: ' + err.name);
					});

				} else {
				  consoleLog('Contacts API not supported.');
				}
			  }
			  function round(num) {  // return num rounded to 5 decimals, and signed
				  return (num < 0 ? "" : "%252B") + Math.round(num*100000) / 100000;
			  }

			  function consoleLog(data) {
				var logElement = document.getElementById('log');
				logElement.innerHTML += data + '\n';
			  }
			function onPositionUpdate(position) {
				var lat = round(position.coords.latitude);
				var lng = round(position.coords.longitude);
//				alert("Current position: " + lat + ", " + lng);
				byId("sate").href = "sms://0825704803?body=Click%20this%20link%20to%20send%20SMS%3A%20http%3A%2F%2Fmaps.google.com%2Fmaps%3Ft=k%2526q=loc%3A(" + lat + "," + lng + ")";
//				byId("sate").href = "http://localhost?body=Click%20this%20link%20to%20send%20SMS%3A%20http%3A%2F%2Fmaps.google.com%2Fmaps%3Ft=k%2526q=loc%3A(" + lat + "," + lng + ")";
			}

			if(navigator.geolocation)
				navigator.geolocation.getCurrentPosition(onPositionUpdate);
			else
				alert("navigator.geolocation is not available");
function init() {  // get [[countryNames, codes, phoneCodes]...
}
function fixme(target) {
	let size = document.aform.size.value;
	target.href = "sms://0825704803?body=" +  "0123456789".repeat(Math.ceil(size/10)).substr(0, size);
}
</script>
<br>
<textarea id="text-val" rows="4" cols="50">CellA1,CellB1,CellC1\nCellA2,CellB2,CellC2\n</textarea><br>
Size: <input type="text" id="csvsize" value="50"><br>
<input type="button" id="dwn-btn" value="Download dynamically generated csv file"/>
<script>
// write localStorage content to a "downloaded" file so the user can email it on.  From:
// https://ourcodeworld.com/articles/read/189/how-to-create-a-file-and-generate-a-download-with-javascript-in-the-browser-without-a-server
function download(filename, text) {
	var csvsize = document.getElementById("csvsize").value;
	text = text.repeat(csvsize / text.length);  // repeat text to get requested length
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);
    element.style.display = 'none';
    document.body.appendChild(element);
    element.click();
    document.body.removeChild(element);
}

// Start file download.
	document.getElementById("dwn-btn").addEventListener("click", function(){
    // Generate download of hello.txt file with some content
	var text = document.getElementById("text-val").value.replace(/\\n/g, "\n");
    var filename = "download.csv";
    download(filename, text);
}, false);
		</script>

	</body>
</html>
